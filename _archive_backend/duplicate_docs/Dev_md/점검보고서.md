# AHP 플랫폼 점검 보고서

작성일: [승인 후 자동 업데이트]
상태: 초기 스켈레톤 작성, 실제 점검 결과 대기

## 1) 프로젝트 개요
- 목적: 연구자들을 위한 AHP(Analytic Hierarchy Process) 플랫폼
- 구성:
  - 프론트엔드: https://github.com/aebonlee/ahp_app
  - 백엔드: https://github.com/aebonlee/ahp-django-service
  - 배포 백엔드: https://ahp-django-backend.onrender.com
  - 데이터베이스: PostgreSQL (Service ID: dpg-d2q8l5qdbo4c73bt3780-a)

## 2) 점검 요약(현재)
- 로컬 워크스페이스 읽기: 승인 필요로 미실행
- 원격 레포 상태 확인: 네트워크 제한으로 미실행
- 배포 백엔드 헬스체크: 네트워크 제한으로 미실행
- DB 연결성 점검: 네트워크/자격정보 필요로 미실행

승인 획득 후, 아래 체크리스트에 실제 결과를 채워 반영합니다.

## 3) 로컬 워크스페이스 점검
- 작업 경로: d:\\ahp
- 현재 상태: 디렉터리/파일 구조 파악 대기
- 권장 확인 커맨드(읽기 전용):
  - PowerShell: `Get-Location; Get-ChildItem -Force`
  - Git 상태: `git status -sb` `git remote -v`
  - 빠른 파일 검색: `rg --files` (없으면 `Get-ChildItem -Recurse`)
- 산출물: 루트 구조, 주요 패키지 매니저 파일(`package.json`, `pyproject.toml`/`requirements.txt`), `README.md`, `AGENTS.md` 존재 여부

## 4) 프론트엔드(ahp_app)
- 원격: https://github.com/aebonlee/ahp_app
- 로컬 폴더 존재 여부: [미확인]
- 체크리스트:
  - Node.js/패키지 관리자 버전: `node -v`, `npm -v` 또는 `pnpm -v`/`yarn -v`
  - 의존성 설치: `npm ci` 또는 `pnpm i --frozen-lockfile`
  - 빌드/개발 스크립트: `npm run build`, `npm run dev`
  - 환경변수 템플릿: `.env.example`/`.env` 확인
  - 품질: `npm run lint`/`npm test` (있을 경우)
  - 번들 결과/라우팅 동작 확인
- 메모: 로컬/원격 비교 후 브랜치 전략, 릴리즈 태그 유무 기록 예정

## 5) 백엔드(ahp-django-service)
- 원격: https://github.com/aebonlee/ahp-django-service
- 배포: https://ahp-django-backend.onrender.com
- 로컬 폴더 존재 여부: [미확인]
- 체크리스트:
  - Python/런타임: `python --version`, 패키지 관리(`pip/poetry/pdm`) 확인
  - 의존성: `pip install -r requirements.txt` 또는 `poetry install`
  - Django 기본 점검: `python manage.py check`, 마이그레이션 상태 `python manage.py showmigrations`
  - 단위/통합 테스트: `pytest -q` 또는 `python manage.py test`
  - 설정: `settings.py`(환경별 분리, `DEBUG`, `ALLOWED_HOSTS`, `CORS`, `DATABASES`), `.env` 사용 여부
  - 보안: 시크릿/키 외부화, 보안 미들웨어, CORS 정책, CSRF 설정
  - API 스펙: `drf-spectacular`/`swagger`/`redoc` 여부, 핵심 엔드포인트 헬스체크

## 6) 배포 백엔드 헬스체크
- 기본 핑: `Invoke-WebRequest https://ahp-django-backend.onrender.com/ -UseBasicParsing`
- 자주 쓰는 헬스 엔드포인트(있다면): `/health`, `/api/health`, `/__heartbeat__`
- 응답 확인 항목: HTTP 상태코드, 응답 시간, CORS 헤더, 빌드/릴리즈 버전 노출 여부
- 결과: [미실행]

## 7) 데이터베이스(PostgreSQL)
- 서비스 식별자: dpg-d2q8l5qdbo4c73bt3780-a (호스트/포트/DB명/계정은 별도 보관 가정)
- 연결 문자열 예시(`DATABASE_URL`): `postgresql://<USER>:<PASSWORD>@<HOST>:<PORT>/<DBNAME>`
- 권장 점검:
  - 클라이언트: `psql --version`
  - 연결 테스트: `psql "${env:DATABASE_URL}" -c "select 1;"`
  - 마이그레이션 일치 여부: Django 마이그레이션 상태와 DB 스키마 비교
  - 성능/운영: 인덱스, 연결 수, 자동백업/보관 주기, 장애 복구 전략
- 보안: 최소 권한 계정, 네트워크 접근 제어, 비밀번호/키 보관 정책

## 8) 운영/보안 체크 공통
- 비밀정보: `.env` 미커밋, 시크릿 매니저/배포 플랫폼 변수 사용
- 로깅/모니터링: 서버 로그 수집, 에러 알림, 성능/APM
- 배포: 무중단 전략, 롤백 절차, 아티팩트 보존
- 품질: 린트/테스트 CI, 브랜치 보호, 코드리뷰
- 문서화: README/운영런북/온보딩 가이드

## 9) 승인 후 실행할 커맨드 목록(제안)
- 로컬 읽기 전용 스캔:
  - `Get-Location; Get-ChildItem -Force`
  - `git status -sb; git remote -v`
  - `rg --files || echo "rg not installed"`
- 프론트엔드 빌드 확인:
  - `node -v; npm -v`
  - `npm ci && npm run build`
- 백엔드 기본 점검:
  - `python --version`
  - `pip install -r requirements.txt` (또는 `poetry install`)
  - `python manage.py check && python manage.py showmigrations`
- 배포 헬스체크:
  - `Invoke-WebRequest https://ahp-django-backend.onrender.com/ -UseBasicParsing`
  - (있다면) `.../health`, `.../api/schema`/`.../swagger` 확인
- DB 연결 테스트:
  - `psql "${env:DATABASE_URL}" -c "select version();"`

## 10) 다음 단계
- [요청] 로컬 읽기 전용 커맨드 실행 승인
- [요청] 외부 네트워크 접근(깃허브/배포/DB) 점검 승인
- [선택] 레포 미존재 시 클론/세팅 승인(네트워크 필요)
- 승인이 나면 실제 결과를 본 문서에 업데이트하고, 위험/이슈/권고사항을 정리합니다.
